"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[22007],{4379:(P,Z,a)=>{a.d(Z,{B:()=>D});var M=a(80529),U=a(61135),p=a(75625),h=a(70262),A=a(62843),e=a(92340),u=a(94650);let D=(()=>{class g{constructor(t){this.httpClient=t,this.url=e.N.API_BASE_URL,this.consigneeDataSource=new U.X([]),this.httpHeader={headers:new M.WM({"Content-Type":"application/json"})}}updateconsigneeDataSource(t){let n=this.consigneeDataSource.getValue();n.unshift(...t),this.consigneeDataSource.next(n)}getConsignee(t,n,i){return this.httpClient.get(this.url+`/consignee/read?user=${t}&consCode=${n}&name=${i}`)}getAll(t){return this.httpClient.get(this.url+`/consignee/readAll?user=${t}`)}getAllrecords(t,n,i){return this.httpClient.get(this.url+`/consignee/readAll?user=${t}&pageNum=${n}&recordsPerPage=${i}`)}createConsignee(t,n,i,o,c,C,E,S,_,d,r,s,m,l){return this.httpClient.post(this.url+"/consignee/create",{CONSCD:t,CONAME:n,COADD1:i,COADD2:o,COADD3:c,COADD4:C,COZIP:E,COZSFX:S,COZONE:_,COPHAR:d,COPHEX:r,COPHNU:s,CODEST:m,user:l}).pipe((0,p.X)(1),(0,h.K)(this.httpError))}updateConsignee(t,n,i,o,c,C,E,S,_,d,r,s,m,l){return this.httpClient.put(this.url+"/consignee/update",{CONSCD:t,CONAME:n,COADD1:i,COADD2:o,COADD3:c,COADD4:C,COZIP:E,COZSFX:S,COZONE:_,COPHAR:d,COPHEX:r,COPHNU:s,CODEST:m,user:l}).pipe((0,p.X)(1),(0,h.K)(this.httpError))}deleteConsignee(t,n){return this.httpClient.delete(this.url+`/consignee/delete?user=${t}&consCode=${n}`)}getConsigneeXrefService(t,n,i,o){return this.httpClient.get(this.url+`/consigneeCrossRef/read?user=${t}&consigneeCode=${n}&pageNo=${i}&recordsPerPage=${o}`)}createConsigneeXrefService(t,n,i){return this.httpClient.post(this.url+"/consigneeCrossRef/create",{consigneeCode:t,parentConsignee:n,user:i}).pipe((0,p.X)(1),(0,h.K)(this.httpError))}updateConsigneeXrefService(t,n,i){return this.httpClient.put(this.url+"/consigneeCrossRef/update",{consigneeCode:t,parentConsignee:n,user:i}).pipe((0,p.X)(1),(0,h.K)(this.httpError))}deleteConsigneeXrefService(t,n){return this.httpClient.delete(this.url+`/consigneeCrossRef/delete?user=${t}&consigneeCode=${n}`)}getConsigneeComments(t,n,i,o){return this.httpClient.get(this.url+`/consignee/commentRead?user=${t}&consigneeCode=${n}&subType=${i}&sequence=${o}`)}createConsigneeCommentService(t,n,i,o,c){return this.httpClient.post(this.url+"/consignee/commentCreate",{consigneeCode:t,subType:n,sequence:i,comment:o,user:c}).pipe((0,p.X)(1),(0,h.K)(this.httpError))}updateConsigneeCommentService(t,n,i,o,c){return this.httpClient.put(this.url+"/consignee/commentUpdate ",{consigneeCode:t,subType:n,sequence:i,comment:o,user:c}).pipe((0,p.X)(1),(0,h.K)(this.httpError))}deleteconsigneeCommentService(t,n,i,o){return this.httpClient.delete(this.url+`/consignee/commentDelete?user=${t}&consigneeCode=${n}&subType=${i}&sequence=${o}`).pipe((0,p.X)(1),(0,h.K)(this.httpError))}httpError(t){let n="";return n=t.error instanceof ErrorEvent?t.error.message:`Error Code: ${t.status}\nMessage: ${t.message}`,console.log(n),(0,A._)(()=>new Error(n))}}return g.\u0275fac=function(t){return new(t||g)(u.LFG(M.eN))},g.\u0275prov=u.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()},22007:(P,Z,a)=>{a.r(Z),a.d(Z,{MiscShipComponent:()=>S});var M=a(7155),U=a(70879),p=a(48529),h=a(35226),A=a.n(h),e=a(94650),u=a(24006),D=a(65412),g=a(19132),O=a(4379),t=a(65105),n=a(97392),i=a(4859),o=a(59549),c=a(44144),C=a(73546);const E=["paginator"];let S=(()=>{class _{constructor(r,s,m,l,f){this.fb=r,this.matDialog=s,this.router=m,this.consigneeSrvc=l,this.Orderservice=f,this.OrdersURL="/main-nav/orders/read",this.user=localStorage.getItem("userName"),this.dataSource=[],this.duplicateSource=[]}ngOnInit(){this.element=history.state,console.log(this.element),this.form=this.fb.group({billNumber:this.element.OHBILL,Storer:this.element.OHSTOR,Consignee:"",ProNumber:this.element.OHPRO,Carrier:"",ShipType:this.element.OHSHPT,ShipDate:this.element.SHDESE,ShipTime:this.element.SHDESE,ShipDateChgCode:[""],LoadCode:[""],LoadQuantity:[""],ChepPalletsReturned:[""],loadOrderNumber:[""],MasterReferenceNumber:[""],LinkSeqNbr:[""],EquipmentNumber:[""],Seal1:[""],Seal2:[""],FreightCharge:[""]}),this.consigneeSrvc.getConsignee(this.user,this.element.OHCONS,"").subscribe(r=>{const s=r[0].data[1]?.value,l=JSON.parse(s).returnedData?.[0],f=`${l.WCNSCD} ${l.WCNAME}`.trim(),T=`${this.element.OHCAR} ${l.WCRNAM}`.trim();this.form.patchValue({Consignee:f,Carrier:T})}),this.dataSource=new M.by(this.duplicateSource),this.dataSource.paginator=this.paginator}ngOnDestroy(){this.MiscellaneousShipSubscription&&this.MiscellaneousShipSubscription.unsubscribe()}MiscShip(){var r=this.form.value;this.MiscellaneousShipSubscription&&this.MiscellaneousShipSubscription.unsubscribe(),this.MiscellaneousShipSubscription=this.Orderservice.MiscShipData(this.user,this.element.OHBILL,r.Storer,r.Consignee,r.ProNumber,r.Carrier,r.CarrierName,r.ShipType,r.ShipName,r.ShipDate,r.ShipTime,r.ShipDateChgCode,r.LoadCode,r.LoadQuantity,r.ChepPalletsReturned,r.loadOrderNumber,r.MasterReferenceNumber,r.LinkSeqNbr,r.EquipmentNumber,r.Seal1,r.Seal2,r.FreightCharge).subscribe(s=>{this.result=s,console.log("API Response:",this.result);const m=s?.[0]?.data?.[1]?.value;let l="";try{l=JSON.parse(m)?.returnedData?.message}catch(f){console.error("Failed to parse response message:",f)}l===p.R.updated?(this.successMessage(l),this.router.navigateByUrl(this.OrdersURL,{state:this.element})):this.failureMessage(l)})}successMessage(r){A().fire(r,"","success")}failureMessage(r){A().fire(r,"","error")}onBack(){this.router.navigate([this.OrdersURL])}}return _.\u0275fac=function(r){return new(r||_)(e.Y36(u.qu),e.Y36(D.uw),e.Y36(g.F0),e.Y36(O.B),e.Y36(t.p))},_.\u0275cmp=e.Xpm({type:_,selectors:[["app-misc-ship"]],viewQuery:function(r,s){if(1&r&&e.Gf(E,5),2&r){let m;e.iGM(m=e.CRH())&&(s.paginator=m.first)}},standalone:!0,features:[e.jDz],decls:89,vars:1,consts:[[1,"over-Flow"],[1,"title"],["mat-button","",1,"backButton","go-back-btn",3,"click"],[1,"tally-serach-form"],[1,"form","over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","billNumber"],["matInput","","formControlName","Storer"],["matInput","","formControlName","Consignee"],["matInput","","formControlName","ProNumber"],["matInput","","formControlName","Carrier"],["matInput","","formControlName","ShipType"],["matInput","","type","date","formControlName","ShipDate"],["matInput","","type","time","formControlName","ShipTime"],["matInput","","formControlName","ShipDateChgCode"],["matInput","","formControlName","LoadCode"],["matInput","","formControlName","LoadQuantity"],["matInput","","formControlName","ChepPalletsReturned"],["matInput","","formControlName","loadOrderNumber"],["matInput","","formControlName","MasterReferenceNumber"],["matInput","","formControlName","LinkSeqNbr"],["matInput","","formControlName","EquipmentNumber"],["matInput","","formControlName","Seal1"],["matInput","","formControlName","Seal2"],["matInput","","formControlName","FreightCharge"],["mat-button","","mat-raised-button","",1,"buttons","addButton",3,"click"]],template:function(r,s){1&r&&(e.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1)(3,"button",2),e.NdJ("click",function(){return s.onBack()}),e.TgZ(4,"mat-icon"),e._uU(5,"navigate_before "),e.qZA()(),e._uU(6," Update Shipment Confirmation "),e.qZA()(),e.TgZ(7,"mat-card-content",3)(8,"form",4)(9,"div",5)(10,"div",6)(11,"mat-form-field",7)(12,"mat-label"),e._uU(13,"Bill Number"),e.qZA(),e._UZ(14,"input",8),e.qZA(),e.TgZ(15,"mat-form-field",7)(16,"mat-label"),e._uU(17,"Storer"),e.qZA(),e._UZ(18,"input",9),e.qZA(),e.TgZ(19,"mat-form-field",7)(20,"mat-label"),e._uU(21,"Consignee"),e.qZA(),e._UZ(22,"input",10),e.qZA(),e.TgZ(23,"mat-form-field",7)(24,"mat-label"),e._uU(25,"Pro Number"),e.qZA(),e._UZ(26,"input",11),e.qZA(),e.TgZ(27,"mat-form-field",7)(28,"mat-label"),e._uU(29,"Carrier"),e.qZA(),e._UZ(30,"input",12),e.qZA(),e.TgZ(31,"mat-form-field",7)(32,"mat-label"),e._uU(33,"Ship Type"),e.qZA(),e._UZ(34,"input",13),e.qZA(),e.TgZ(35,"mat-form-field",7)(36,"mat-label"),e._uU(37,"Ship Date"),e.qZA(),e._UZ(38,"input",14),e.qZA(),e.TgZ(39,"mat-form-field",7)(40,"mat-label"),e._uU(41,"Ship Time"),e.qZA(),e._UZ(42,"input",15),e.qZA(),e.TgZ(43,"mat-form-field",7)(44,"mat-label"),e._uU(45,"Ship Date Change Code"),e.qZA(),e._UZ(46,"input",16),e.qZA(),e.TgZ(47,"mat-form-field",7)(48,"mat-label"),e._uU(49,"Load Code"),e.qZA(),e._UZ(50,"input",17),e.qZA(),e.TgZ(51,"mat-form-field",7)(52,"mat-label"),e._uU(53,"Load Quantity"),e.qZA(),e._UZ(54,"input",18),e.qZA(),e.TgZ(55,"mat-form-field",7)(56,"mat-label"),e._uU(57,"CHEP Pallet Quantity"),e.qZA(),e._UZ(58,"input",19),e.qZA(),e.TgZ(59,"mat-form-field",7)(60,"mat-label"),e._uU(61,"Manifest No"),e.qZA(),e._UZ(62,"input",20),e.qZA(),e.TgZ(63,"mat-form-field",7)(64,"mat-label"),e._uU(65,"Master Ref No"),e.qZA(),e._UZ(66,"input",21),e.qZA(),e.TgZ(67,"mat-form-field",7)(68,"mat-label"),e._uU(69,"Link Sequence"),e.qZA(),e._UZ(70,"input",22),e.qZA(),e.TgZ(71,"mat-form-field",7)(72,"mat-label"),e._uU(73,"Equipment No"),e.qZA(),e._UZ(74,"input",23),e.qZA(),e.TgZ(75,"mat-form-field",7)(76,"mat-label"),e._uU(77,"Seal 1"),e.qZA(),e._UZ(78,"input",24),e.qZA(),e.TgZ(79,"mat-form-field",7)(80,"mat-label"),e._uU(81,"Seal 2"),e.qZA(),e._UZ(82,"input",25),e.qZA(),e.TgZ(83,"mat-form-field",7)(84,"mat-label"),e._uU(85,"Freight Chg"),e.qZA(),e._UZ(86,"input",26),e.qZA()()(),e.TgZ(87,"button",27),e.NdJ("click",function(){return s.MiscShip()}),e._uU(88," Submit "),e.qZA()()()()),2&r&&(e.xp6(8),e.Q6J("formGroup",s.form))},dependencies:[U.m,u._Y,u.Fj,u.JJ,u.JL,u.sg,u.u,n.Hw,i.lW,o.KE,o.hX,c.Nt,C.a8,C.dk,C.dn,C.n5]}),_})()}}]);