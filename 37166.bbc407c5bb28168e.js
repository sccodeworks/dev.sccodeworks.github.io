"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[37166],{39505:(D,_,a)=>{a.d(_,{L:()=>N});var s=a(24006),O=a(59549),Z=a(69751),y=a(68675),S=a(54004),r=a(94650),A=a(36895),t=a(47957),v=a(3238),T=a(44144);function m(c,f){if(1&c&&(r.TgZ(0,"mat-option",4),r._uU(1),r.qZA()),2&c){const i=f.$implicit;r.Q6J("value",i),r.xp6(1),r.Oqu(i)}}let N=(()=>{class c{constructor(i){this.fb=i,this.options=[],this.value="",this.placeholder="",this.id="",this.ngControl=null,this.label="",this.appearance="outline",this.describedBy="",this.touched=!1,this.focused=!1,this.empty=!1,this.required=!1,this.disabled=!1,this.shouldLabelFloat=!1,this.formControlName="",this.errorState=!1,this.previousValue="",this.onInput=u=>{},this.onChange=u=>{},this.onTouched=()=>{},this.control=this.fb.control(""),this.stateChanges=new Z.y,this.filteredOptions=this.control.valueChanges.pipe((0,y.O)(this.value),(0,S.U)(u=>this._filter(u)))}setDescribedByIds(i){}onContainerClick(i){}markAsTouched(){this.touched||(this.touched=!0,this.onTouched())}writeValue(i){null!=i&&(this.control.setValue(i),this.value=i)}registerOnChange(i){this.onChange=i}registerOnTouched(i){this.onTouched=i}setDisabledState(i){this.disabled=i}_filter(i){if(null==i||0==i.length)return this.options;const u=i.toLowerCase(),C=this.options.filter(g=>g.toLowerCase().includes(u));return!this.disabled&&1===C.length&&this.control.value!=C[0]&&i.length>=(this.previousValue?.length??0)&&this.control.setValue(C[0]),this.onChange(this.control.value),this.previousValue=this.control.value,C}}return c.\u0275fac=function(i){return new(i||c)(r.Y36(s.qu))},c.\u0275cmp=r.Xpm({type:c,selectors:[["custom-input-autocomplete"]],hostVars:1,hostBindings:function(i,u){2&i&&r.uIk("aria-describedby",u.describedBy)},inputs:{options:"options",value:"value",placeholder:"placeholder",id:"id",ngControl:"ngControl",label:"label",appearance:"appearance"},features:[r._Bn([{provide:s.JU,multi:!0,useExisting:c},{provide:O.Eo,useExisting:c}],[{provide:s.gN,useExisting:s.sg}])],decls:8,vars:9,consts:[[3,"appearance"],["matInput","",3,"id","placeholder","formControl","matAutocomplete"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(i,u){if(1&i&&(r.TgZ(0,"mat-form-field",0)(1,"mat-label"),r._uU(2),r.qZA(),r._UZ(3,"input",1),r.TgZ(4,"mat-autocomplete",null,2),r.YNc(6,m,2,2,"mat-option",3),r.ALo(7,"async"),r.qZA()()),2&i){const C=r.MAs(5);r.Q6J("appearance",u.appearance),r.xp6(2),r.Oqu(u.label),r.xp6(1),r.Q6J("id",u.id)("placeholder",u.placeholder)("formControl",u.control)("matAutocomplete",C),r.xp6(3),r.Q6J("ngForOf",r.lcZ(7,7,u.filteredOptions))}},dependencies:[A.sg,s.Fj,s.JJ,s.oH,t.XC,t.ZL,v.ey,O.KE,O.hX,T.Nt,A.Ov]}),c})()},37166:(D,_,a)=>{a.r(_),a.d(_,{SplitOrderComponent:()=>j});var s=a(7155),O=a(70879),Z=a(65412),y=a(35226),S=a.n(y),r=a(48529),A=a(86385),t=a(94650),v=a(65105),T=a(19132),m=a(24006),N=a(97392),c=a(4859),f=a(59549),i=a(44144),u=a(84385),C=a(3238),g=a(73546),B=a(39505);let I=(()=>{class o{constructor(e,n,p,h,d,U){this.anyvariable=e,this.matDialog=n,this.OrderService=p,this.dialogRef=h,this.router=d,this.fb=U,this.SplitOrdersBaseUrl="/main-nav/split-orders/read",this.recode="892",this.ReasonCodeOptions=[],this.user=localStorage.getItem("userName")||"",this.tableData=[]}ngOnInit(){this.row=this.anyvariable[0],this.formMeta=this.anyvariable[1],this.orderHeader=this.anyvariable[2],this.form=this.fb.group({WKBILL:this.formMeta?.BillNumber||this.orderHeader?.OHBILL||"",origRefNo:this.formMeta?.OriginalRefNum||"",newRefNo:this.formMeta?.NewRefNum||"",reasonCode:this.formMeta?.ReasonCode||"",comment:this.formMeta?.Comment||"",option:this.formMeta?.Option||"",applyAutoCharges:this.formMeta?.ApplyAutoCharges||"",SplitQuantity:this.row?.WNQTYS??""}),this.fetchCode(this.recode)}fetchCode(e){this.ReasonCodeOptions=[],this.SplitOrderSubscription=this.OrderService.getReasonCode(e).subscribe(n=>{this.result=n;for(const p of this.result)this.ReasonCodeOptions.push(`${p.RERECD} - ${p.REDEFI}`)})}ngOnDestroy(){this.SplitOrderSubscription&&this.SplitOrderSubscription.unsubscribe()}SplitOrderUpdate(){const e=this.form.value,n=e.reasonCode?.split(" - ")||[],p=n[0]?.trim()||"",h=n[1]?.trim()||"";this.SplitOrderSubscription&&this.SplitOrderSubscription.unsubscribe(),this.SplitOrderSubscription=this.OrderService.SplitOrder(this.user,this.orderHeader?.OHBILL,e.origRefNo?.trim()||"",e.newRefNo?.trim()||"",p,h,e.comment?.trim()||"",e.option?.trim()||"",e.applyAutoCharges?.trim()||"",this.row.WHSEQ,this.row.WHQTYS,this.row.WITDSC,this.row.ODSTAT,this.row.WOQTYS,e.SplitQuantity).subscribe(b=>{this.result=b;const R=JSON.parse(b[0].data[this.result[0].data.length-1].value).returnedData.message;R===r.R.updateMsg?(this.successMessage(R),this.closeDialog(),this.router.navigateByUrl(this.SplitOrdersBaseUrl,{state:this.anyvariable[2]})):this.failureMessage(R)})}successMessage(e){S().fire(e,"","success")}failureMessage(e){S().fire(e,"","error")}closeDialog(){this.dialogRef.close()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(Z.WI),t.Y36(Z.uw),t.Y36(v.p),t.Y36(Z.so),t.Y36(T.F0),t.Y36(m.qu))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-split-order-update"]],standalone:!0,features:[t.jDz],decls:56,vars:2,consts:[[1,"over-Flow"],[1,"main-header-title"],[1,"button"],["mat-icon-button","",3,"click"],["mat-icon-button","","color","primary"],[1,"tally-serach-form"],[1,"over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","WKBILL"],["matInput","","formControlName","origRefNo"],["matInput","","formControlName","newRefNo"],["formControlName","reasonCode","label","Reason Code","appearance","outline","required","",1,"full-width2",3,"options"],["appearance","outline",1,"full-width","w-100"],["matInput","","formControlName","comment"],["formControlName","option"],["value","1"],["value","2"],["value","3"],["value","4"],["formControlName","applyAutoCharges"],["value","Y"],["value","N"],["matInput","","formControlName","SplitQuantity"],["mat-button","","mat-raised-button","",1,"buttons","addButton",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-card-header")(3,"mat-card-title"),t._uU(4," Split an Order "),t.qZA()(),t.TgZ(5,"div",2)(6,"button",3),t.NdJ("click",function(){return n.closeDialog()}),t.TgZ(7,"mat-icon",4),t._uU(8,"close"),t.qZA()()()(),t.TgZ(9,"mat-card-content",5)(10,"form",6)(11,"div",7)(12,"div",8)(13,"mat-form-field",9)(14,"mat-label"),t._uU(15,"Bill "),t.qZA(),t._UZ(16,"input",10),t.qZA(),t.TgZ(17,"mat-form-field",9)(18,"mat-label"),t._uU(19,"Orig Ref No"),t.qZA(),t._UZ(20,"input",11),t.qZA(),t.TgZ(21,"mat-form-field",9)(22,"mat-label"),t._uU(23,"New Ref No"),t.qZA(),t._UZ(24,"input",12),t.qZA(),t._UZ(25,"custom-input-autocomplete",13),t.TgZ(26,"mat-form-field",14)(27,"mat-label"),t._uU(28,"Comment"),t.qZA(),t._UZ(29,"textarea",15),t.qZA(),t.TgZ(30,"mat-form-field",9)(31,"mat-label"),t._uU(32,"Option"),t.qZA(),t.TgZ(33,"mat-select",16)(34,"mat-option",17),t._uU(35,"1 - No Comment"),t.qZA(),t.TgZ(36,"mat-option",18),t._uU(37,"2 - Original Order Only"),t.qZA(),t.TgZ(38,"mat-option",19),t._uU(39,"3 - New Order Only"),t.qZA(),t.TgZ(40,"mat-option",20),t._uU(41,"4 - Both Orders"),t.qZA()()(),t.TgZ(42,"mat-form-field",9)(43,"mat-label"),t._uU(44,"Apply Auto Charges"),t.qZA(),t.TgZ(45,"mat-select",21)(46,"mat-option",22),t._uU(47,"Yes"),t.qZA(),t.TgZ(48,"mat-option",23),t._uU(49,"No"),t.qZA()()(),t.TgZ(50,"mat-form-field",9)(51,"mat-label"),t._uU(52,"Split Quantity"),t.qZA(),t._UZ(53,"input",24),t.qZA()()(),t.TgZ(54,"button",25),t.NdJ("click",function(){return n.SplitOrderUpdate()}),t._uU(55," Submit "),t.qZA()()()()),2&e&&(t.xp6(10),t.Q6J("formGroup",n.form),t.xp6(15),t.Q6J("options",n.ReasonCodeOptions))},dependencies:[O.m,m._Y,m.Fj,m.JJ,m.JL,m.Q7,m.sg,m.u,N.Hw,c.lW,f.KE,f.hX,i.Nt,u.gD,C.ey,g.a8,g.dk,g.dn,g.n5,A.j,B.L]}),o})();var E=a(98739);const M=["paginator"];function w(o,l){1&o&&(t.TgZ(0,"th",35),t._uU(1,"Item"),t.qZA())}function q(o,l){if(1&o&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&o){const e=l.$implicit;t.xp6(1),t.Oqu(e.WITDSC)}}function Q(o,l){1&o&&(t.TgZ(0,"th",35),t._uU(1,"Status "),t.qZA())}function Y(o,l){if(1&o&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&o){const e=l.$implicit;t.xp6(1),t.Oqu(e.ODSTAT)}}function L(o,l){1&o&&(t.TgZ(0,"th",35),t._uU(1,"Retain Quantity"),t.qZA())}function x(o,l){if(1&o&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&o){const e=l.$implicit;t.xp6(1),t.Oqu(e.WOQTYS)}}function J(o,l){1&o&&(t.TgZ(0,"th",35),t._uU(1,"Split Quantity"),t.qZA())}function W(o,l){if(1&o&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&o){const e=l.$implicit;t.xp6(1),t.Oqu(0===e.WNQTYS?"":e.WNQTYS)}}function P(o,l){1&o&&t._UZ(0,"th",37)}function H(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"td",36)(1,"div",38)(2,"button",39)(3,"mat-icon"),t._uU(4,"more_vert"),t.qZA()(),t.TgZ(5,"ul",40)(6,"li")(7,"button",41),t.NdJ("click",function(){const h=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.update(h))}),t.TgZ(8,"mat-icon",42),t._uU(9,"edit"),t.qZA(),t.TgZ(10,"mat-label"),t._uU(11,"Edit"),t.qZA()()()()()()}}function F(o,l){1&o&&t._UZ(0,"tr",43)}function K(o,l){1&o&&t._UZ(0,"tr",44)}const z=function(){return[8,16,24]};let j=(()=>{class o{constructor(e,n,p,h){this.matDialog=e,this.Orderservice=n,this.router=p,this.fb=h,this.OrdersBaseUrl="/main-nav/orders/read",this.totalRecords=0,this.pageSize=8,this.pageNumber=1,this.user=localStorage.getItem("userName")||"",this.displayedColumns=["Item","Status","Retain Quantity","Split Quantity","Actions"],this.dataSource=new s.by,this.SplitOrderMetadata={}}ngOnInit(){this.element=history.state,this.form=this.fb.group({Bill:this.element.OHBILL,OriginalRefNum:"",NewRefNum:"",ReasonCode:"",Comment:"",Option:"",ApplyAutoCharges:""}),this.SplitOrder(this.pageSize,1)}onPaginateChange(e){this.pageSize=e.pageSize,this.SplitOrder(e.pageSize,e.pageIndex+1)}ngOnDestroy(){this.SplitOrderSubscription&&this.SplitOrderSubscription.unsubscribe()}SplitOrder(e,n){this.SplitOrderSubscription&&this.SplitOrderSubscription.unsubscribe(),this.SplitOrderSubscription=this.Orderservice.SplitOrderRead(this.user,this.element.OHBILL,e,n).subscribe(h=>{var d=JSON.parse(h[0].data[1]?.value);const b=d.returnedData;this.dataSource.data=d.returnedData,this.totalRecords=d.TotalRecords,this.SplitOrderMetadata={OriginalRefNum:d.OriginalRefNum?.trim()||"",NewRefNum:d.NewRefNum?.trim()||"",ReasonCode:d.ReasonCode?.trim()||"",Comment:d.Comment?.trim()||"",Option:d.Option?.trim()||"",ApplyAutoCharges:d.ApplyAutoCharges?.trim()||"",BillNumber:d.BillNumber,returnedData:b},this.form.patchValue(this.SplitOrderMetadata)})}update(e){this.matDialog.open(I,{width:"1000px",maxHeight:"80vh",data:[e,this.SplitOrderMetadata,this.element],autoFocus:!1})}onBack(){this.router.navigate([this.OrdersBaseUrl])}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(Z.uw),t.Y36(v.p),t.Y36(T.F0),t.Y36(m.qu))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-split-order"]],viewQuery:function(e,n){if(1&e&&t.Gf(M,5),2&e){let p;t.iGM(p=t.CRH())&&(n.paginator=p.first)}},standalone:!0,features:[t.jDz],decls:71,vars:8,consts:[[1,"over-Flow"],[1,"title"],["mat-button","",1,"backButton","go-back-btn",3,"click"],[1,"tally-serach-form"],[1,"over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","Bill"],["matInput","","formControlName","OriginalRefNum"],["matInput","","formControlName","NewRefNum"],["matInput","","formControlName","ReasonCode"],["appearance","outline",1,"full-width","w-100"],["matInput","","formControlName","Comment"],["formControlName","Option"],["value","1"],["value","2"],["value","3"],["value","4"],["formControlName","ApplyAutoCharges"],["value","Y"],["value","N"],["mat-table","",1,"mat-elevation-z8","tally-table",3,"dataSource"],["matColumnDef","Item"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Status"],["matColumnDef","Retain Quantity"],["matColumnDef","Split Quantity"],["matColumnDef","Actions"],["mat-header-cell","","class","tally_actions_sec",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",1,"tally-table-pagination",3,"length","pageSizeOptions","pageSize","page"],["paginator",""],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",1,"tally_actions_sec"],[1,"dropdown","more_options_btn"],["type","button","id","dropdownMenuButton1","data-bs-toggle","dropdown","aria-expanded","false",1,"btn"],["aria-labelledby","dropdownMenuButton1",1,"dropdown-menu"],["mat-icon-button","",3,"click"],["mat-icon-button","","color","primary"],["mat-header-row",""],["mat-row",""]],template:function(e,n){1&e&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1)(3,"button",2),t.NdJ("click",function(){return n.onBack()}),t.TgZ(4,"mat-icon"),t._uU(5,"navigate_before "),t.qZA()(),t._uU(6," Split an Order "),t.qZA()(),t.TgZ(7,"mat-card-content",3)(8,"form",4)(9,"div",5)(10,"div",6)(11,"mat-form-field",7)(12,"mat-label"),t._uU(13,"Bill "),t.qZA(),t._UZ(14,"input",8),t.qZA(),t.TgZ(15,"mat-form-field",7)(16,"mat-label"),t._uU(17,"Orig Ref No"),t.qZA(),t._UZ(18,"input",9),t.qZA(),t.TgZ(19,"mat-form-field",7)(20,"mat-label"),t._uU(21,"New Ref No"),t.qZA(),t._UZ(22,"input",10),t.qZA(),t.TgZ(23,"mat-form-field",7)(24,"mat-label"),t._uU(25,"Reason Code"),t.qZA(),t._UZ(26,"input",11),t.qZA(),t.TgZ(27,"mat-form-field",12)(28,"mat-label"),t._uU(29,"Comment"),t.qZA(),t._UZ(30,"input",13),t.qZA(),t.TgZ(31,"mat-form-field",7)(32,"mat-label"),t._uU(33,"Option"),t.qZA(),t.TgZ(34,"mat-select",14)(35,"mat-option",15),t._uU(36,"1 - No Comment"),t.qZA(),t.TgZ(37,"mat-option",16),t._uU(38,"2 - Original Order Only"),t.qZA(),t.TgZ(39,"mat-option",17),t._uU(40,"3 - New Order Only"),t.qZA(),t.TgZ(41,"mat-option",18),t._uU(42,"4 - Both Orders"),t.qZA()()(),t.TgZ(43,"mat-form-field",7)(44,"mat-label"),t._uU(45,"Apply Auto Charges"),t.qZA(),t.TgZ(46,"mat-select",19)(47,"mat-option",20),t._uU(48,"Yes"),t.qZA(),t.TgZ(49,"mat-option",21),t._uU(50,"No"),t.qZA()()()()()()(),t.TgZ(51,"table",22),t.ynx(52,23),t.YNc(53,w,2,0,"th",24),t.YNc(54,q,2,1,"td",25),t.BQk(),t.ynx(55,26),t.YNc(56,Q,2,0,"th",24),t.YNc(57,Y,2,1,"td",25),t.BQk(),t.ynx(58,27),t.YNc(59,L,2,0,"th",24),t.YNc(60,x,2,1,"td",25),t.BQk(),t.ynx(61,28),t.YNc(62,J,2,0,"th",24),t.YNc(63,W,2,1,"td",25),t.BQk(),t.ynx(64,29),t.YNc(65,P,1,0,"th",30),t.YNc(66,H,12,0,"td",25),t.BQk(),t.YNc(67,F,1,0,"tr",31),t.YNc(68,K,1,0,"tr",32),t.qZA(),t.TgZ(69,"mat-paginator",33,34),t.NdJ("page",function(h){return n.onPaginateChange(h)}),t.qZA()()),2&e&&(t.xp6(8),t.Q6J("formGroup",n.form),t.xp6(43),t.Q6J("dataSource",n.dataSource),t.xp6(16),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(1),t.Q6J("length",n.totalRecords)("pageSizeOptions",t.DdM(7,z))("pageSize",n.pageSize))},dependencies:[O.m,m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u,E.NW,N.Hw,c.lW,f.KE,f.hX,i.Nt,u.gD,C.ey,g.a8,g.dk,g.dn,g.n5,s.BZ,s.fO,s.as,s.w1,s.Dz,s.nj,s.ge,s.ev,s.XQ,s.Gk]}),o})()}}]);