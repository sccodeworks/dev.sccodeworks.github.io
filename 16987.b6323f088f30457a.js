"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[16987,11790,38754,85645],{11790:(L,_,l)=>{l.d(_,{y:()=>g});var p=l(65412),m=l(94650),y=l(97392),C=l(4859);let T=(()=>{class f{constructor(d,Z){this.dialogRef=d,this.data=Z}ngOnInit(){}closeDialog(){this.dialogRef.close(!1)}}return f.\u0275fac=function(d){return new(d||f)(m.Y36(p.so),m.Y36(p.WI))},f.\u0275cmp=m.Xpm({type:f,selectors:[["app-alert-dialog"]],decls:10,vars:3,consts:[[1,"confirm-dialog-container"],[1,"content-container"],["id","close-icon",3,"click"],[1,"content-span","full-width"],["mat-flat-button","","id","no-button",3,"mat-dialog-close"],["mat-flat-button","","id","yes-button",3,"mat-dialog-close"]],template:function(d,Z){1&d&&(m.TgZ(0,"div",0)(1,"div",1)(2,"mat-icon",2),m.NdJ("click",function(){return Z.closeDialog()}),m._uU(3,"close "),m.qZA(),m.TgZ(4,"span",3),m._uU(5),m.qZA()(),m.TgZ(6,"button",4),m._uU(7,"Cancel"),m.qZA(),m.TgZ(8,"button",5),m._uU(9,"Delete"),m.qZA()()),2&d&&(m.xp6(5),m.Oqu(Z.data.message),m.xp6(1),m.Q6J("mat-dialog-close",!1),m.xp6(2),m.Q6J("mat-dialog-close",!0))},dependencies:[y.Hw,C.lW,p.ZT]}),f})(),g=(()=>{class f{constructor(d){this.dialog=d}openCustomAlert(d){return this.dialog.open(T,{width:"450px",panelClass:"confirm-dialog-container",disableClose:!0,data:{message:d}})}}return f.\u0275fac=function(d){return new(d||f)(m.LFG(p.uw))},f.\u0275prov=m.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},16987:(L,_,l)=>{l.r(_),l.d(_,{PutawaylocationComponent:()=>tt});var p=l(7155),m=l(35226),y=l.n(m),C=l(98739),T=l(70879),g=l(65412),f=l(48529),t=l(94650),d=l(19132),Z=l(15013),s=l(24006),w=l(97392),A=l(4859),b=l(59549),U=l(44144),h=l(73546);let S=(()=>{class o{constructor(a,e,i,r,c,u){this.router=a,this.TallyDetailWorkService=e,this.data=i,this.fb=r,this.route=c,this.dialogRef=u,this.user=localStorage.getItem("userName")}ngOnInit(){this.anyvariable=this.data[0],console.log("this.anyvariable:",this.anyvariable),this.form=this.fb.group({Tally:this.anyvariable.Tally,Line:this.anyvariable.Line,Item:this.anyvariable.Item,PalletQuantity:this.anyvariable.PalletQuantity,Serial:"",Location:"",Quantity:this.anyvariable.Quantity,Bucket:"A"})}ngOnDestroy(){this.createServicePutawayLocSubscription&&this.createServicePutawayLocSubscription.unsubscribe()}createPutawayLoc(){const a=this.form.value;this.createServicePutawayLocSubscription&&this.createServicePutawayLocSubscription.unsubscribe(),this.createServicePutawayLocSubscription=this.TallyDetailWorkService.PutawayLocationcase2Create(this.user,a.Tally,a.Line,a.Item,a.PalletQuantity,"",a.Serial,a.Location,a.Quantity,a.Bucket).subscribe({next:e=>{try{this.result=e;const i=this.result[0]?.data,c=i?.[(i?.length||0)-1]?.value||"No message provided";c===f.R.createMsg?(this.successMessage(c),this.closeDialog(),this.router.navigateByUrl("/main-nav/putawayLocation-case2/read",{state:this.data[1]})):this.failureMessage(c)}catch(i){console.error("Parse error:",i),this.failureMessage("Unexpected response format.")}},error:e=>{console.error("HTTP error:",e),this.failureMessage("Network or server error.")}})}successMessage(a){y().fire(a,"","success")}failureMessage(a){y().fire(a,"","error")}closeDialog(){this.dialogRef.close()}}return o.\u0275fac=function(a){return new(a||o)(t.Y36(d.F0),t.Y36(Z.J),t.Y36(g.WI),t.Y36(s.qu),t.Y36(d.gz),t.Y36(g.so))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-putaway-create"]],standalone:!0,features:[t.jDz],decls:47,vars:2,consts:[[1,"over-Flow"],[1,"main-header-title"],["mat-icon-button","",3,"click"],["mat-icon-button","","color","primary"],[1,"tally-serach-form"],[3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","Tally"],["matInput","","formControlName","Line"],["matInput","","formControlName","Item"],["matInput","","formControlName","PalletQuantity"],["matInput","","formControlName","Serial"],["matInput","","formControlName","Location"],["matInput","","formControlName","Quantity"],["matInput","","formControlName","Bucket"],["mat-button","",1,"buttons","addButton","new-tally-form-btn",3,"disabled","click"]],template:function(a,e){1&a&&(t.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-card-header")(3,"mat-card-title"),t._uU(4,"Maintain Putaway Locations"),t.qZA()(),t.TgZ(5,"button",2),t.NdJ("click",function(){return e.closeDialog()}),t.TgZ(6,"mat-icon",3),t._uU(7,"close"),t.qZA()()(),t.TgZ(8,"mat-card-content",4)(9,"form",5)(10,"div",6)(11,"div",7)(12,"mat-form-field",8)(13,"mat-label"),t._uU(14," Tally "),t.qZA(),t._UZ(15,"input",9),t.qZA(),t.TgZ(16,"mat-form-field",8)(17,"mat-label"),t._uU(18," Line "),t.qZA(),t._UZ(19,"input",10),t.qZA(),t.TgZ(20,"mat-form-field",8)(21,"mat-label"),t._uU(22," Item "),t.qZA(),t._UZ(23,"input",11),t.qZA(),t.TgZ(24,"mat-form-field",8)(25,"mat-label"),t._uU(26,"Pallet Quantity "),t.qZA(),t._UZ(27,"input",12),t.qZA(),t.TgZ(28,"mat-form-field",8)(29,"mat-label"),t._uU(30," Serial"),t.qZA(),t._UZ(31,"input",13),t.qZA(),t.TgZ(32,"mat-form-field",8)(33,"mat-label"),t._uU(34," Location"),t.qZA(),t._UZ(35,"input",14),t.qZA(),t.TgZ(36,"mat-form-field",8)(37,"mat-label"),t._uU(38," Quantity "),t.qZA(),t._UZ(39,"input",15),t.qZA(),t.TgZ(40,"mat-form-field",8)(41,"mat-label"),t._uU(42," Bucket"),t.qZA(),t._UZ(43,"input",16),t.qZA()()(),t.TgZ(44,"button",17),t.NdJ("click",function(){return e.createPutawayLoc()}),t.TgZ(45,"span"),t._uU(46,"Create"),t.qZA()()()()()),2&a&&(t.xp6(9),t.Q6J("formGroup",e.form),t.xp6(35),t.Q6J("disabled",!(e.form.valid&&e.form.dirty)))},dependencies:[T.m,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,w.Hw,A.lW,b.KE,b.hX,U.Nt,h.a8,h.dk,h.dn,h.n5]}),o})(),N=(()=>{class o{constructor(a,e,i,r,c,u){this.router=a,this.TallyDetailWorkService=e,this.data=i,this.fb=r,this.route=c,this.dialogRef=u,this.user=localStorage.getItem("userName")}ngOnInit(){this.anyvariable=this.data,console.log("this.anyvariable:",this.anyvariable),this.form=this.fb.group({Tally:this.anyvariable[0].Tally,Line:this.anyvariable[0].Line,Item:this.anyvariable[0].Item,PalletQuantity:this.anyvariable[0].PalletQuantity,Serial:this.anyvariable[2].WSRL,Location:this.anyvariable[2].WLOCN,Quantity:this.anyvariable[2].WQTY,Bucket:this.anyvariable[2].WITYP})}ngOnDestroy(){this.createServicePutawayLocSubscription&&this.createServicePutawayLocSubscription.unsubscribe()}UpdatePutawayLoc(){const a=this.form.value;this.createServicePutawayLocSubscription&&this.createServicePutawayLocSubscription.unsubscribe(),this.createServicePutawayLocSubscription=this.TallyDetailWorkService.PutawayLocationcase2Update(this.user,a.Tally,a.Line,a.Item,a.PalletQuantity,this.anyvariable[2].WSRL,a.Serial,a.Location,a.Quantity,a.Bucket).subscribe({next:e=>{try{this.result=e;const i=this.result[0]?.data,c=i?.[(i?.length||0)-1]?.value||"No message provided";c===f.R.updateMsg?(this.successMessage(c),this.closeDialog(),this.router.navigateByUrl("/main-nav/putawayLocation-case2/read",{state:this.data[1]})):this.failureMessage(c)}catch(i){console.error("Parse error:",i),this.failureMessage("Unexpected response format.")}},error:e=>{console.error("HTTP error:",e),this.failureMessage("Network or server error.")}})}successMessage(a){y().fire(a,"","success")}failureMessage(a){y().fire(a,"","error")}closeDialog(){this.dialogRef.close()}}return o.\u0275fac=function(a){return new(a||o)(t.Y36(d.F0),t.Y36(Z.J),t.Y36(g.WI),t.Y36(s.qu),t.Y36(d.gz),t.Y36(g.so))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-putaway-update"]],standalone:!0,features:[t.jDz],decls:47,vars:1,consts:[[1,"over-Flow"],[1,"main-header-title"],["mat-icon-button","",3,"click"],["mat-icon-button","","color","primary"],[1,"tally-serach-form"],[3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","Tally","readonly",""],["matInput","","formControlName","Line","readonly",""],["matInput","","formControlName","Item","readonly",""],["matInput","","formControlName","PalletQuantity","readonly",""],["matInput","","formControlName","Serial","readonly",""],["matInput","","formControlName","Location",2,"text-transform","uppercase"],["matInput","","formControlName","Quantity"],["matInput","","formControlName","Bucket"],["mat-button","",1,"buttons","addButton","new-tally-form-btn",3,"click"]],template:function(a,e){1&a&&(t.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-card-header")(3,"mat-card-title"),t._uU(4,"Maintain Putaway Locations"),t.qZA()(),t.TgZ(5,"button",2),t.NdJ("click",function(){return e.closeDialog()}),t.TgZ(6,"mat-icon",3),t._uU(7,"close"),t.qZA()()(),t.TgZ(8,"mat-card-content",4)(9,"form",5)(10,"div",6)(11,"div",7)(12,"mat-form-field",8)(13,"mat-label"),t._uU(14," Tally "),t.qZA(),t._UZ(15,"input",9),t.qZA(),t.TgZ(16,"mat-form-field",8)(17,"mat-label"),t._uU(18," Line "),t.qZA(),t._UZ(19,"input",10),t.qZA(),t.TgZ(20,"mat-form-field",8)(21,"mat-label"),t._uU(22," Item "),t.qZA(),t._UZ(23,"input",11),t.qZA(),t.TgZ(24,"mat-form-field",8)(25,"mat-label"),t._uU(26,"Pallet Quantity "),t.qZA(),t._UZ(27,"input",12),t.qZA(),t.TgZ(28,"mat-form-field",8)(29,"mat-label"),t._uU(30," Serial"),t.qZA(),t._UZ(31,"input",13),t.qZA(),t.TgZ(32,"mat-form-field",8)(33,"mat-label"),t._uU(34," Location"),t.qZA(),t._UZ(35,"input",14),t.qZA(),t.TgZ(36,"mat-form-field",8)(37,"mat-label"),t._uU(38," Quantity "),t.qZA(),t._UZ(39,"input",15),t.qZA(),t.TgZ(40,"mat-form-field",8)(41,"mat-label"),t._uU(42," Bucket"),t.qZA(),t._UZ(43,"input",16),t.qZA()()(),t.TgZ(44,"button",17),t.NdJ("click",function(){return e.UpdatePutawayLoc()}),t.TgZ(45,"span"),t._uU(46,"Update"),t.qZA()()()()()),2&a&&(t.xp6(9),t.Q6J("formGroup",e.form))},dependencies:[T.m,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,w.Hw,A.lW,b.KE,b.hX,U.Nt,h.a8,h.dk,h.dn,h.n5]}),o})();var P=l(11790);let D=(()=>{class o{constructor(a,e,i,r,c,u,v){this.router=a,this.CustomAlertService=e,this.TallyDetailWorkService=i,this.data=r,this.fb=c,this.route=u,this.dialogRef=v,this.user=localStorage.getItem("userName")}ngOnInit(){this.anyvariable=this.data,console.log("this.anyvariable:",this.anyvariable),this.form=this.fb.group({Tally:this.anyvariable[0].Tally,Line:this.anyvariable[0].Line,Item:this.anyvariable[0].Item,PalletQuantity:this.anyvariable[0].PalletQuantity,Serial:this.anyvariable[2].WSRL,Location:this.anyvariable[2].WLOCN,Quantity:this.anyvariable[2].WQTY,Bucket:this.anyvariable[2].WITYP}),this.form.disable()}ngOnDestroy(){this.PutawayLocSubscription&&this.PutawayLocSubscription.unsubscribe()}deletePutawayLocation(){const a=this.form.value;this.CustomAlertService.openCustomAlert("Are you sure want to delete Putaway Delete with serial No: "+a.Serial+" ?").afterClosed().subscribe(i=>{i&&(this.PutawayLocSubscription&&this.PutawayLocSubscription.unsubscribe(),this.PutawayLocSubscription=this.TallyDetailWorkService.PutawayLocationcase2Delete(this.user,a.Tally,a.Line,a.Serial).subscribe({next:r=>{try{this.result=r;const c=this.result[0]?.data,v=c?.[(c?.length||0)-1]?.value||"No message provided";v===f.R.Deletemessage?(this.successMessage(v),this.closeDialog(),this.router.navigateByUrl("/main-nav/putawayLocation-case2/read",{state:this.anyvariable[1]})):this.failureMessage(v)}catch(c){console.error("Parse error:",c),this.failureMessage("Unexpected response format.")}},error:r=>{console.error("HTTP error:",r),this.failureMessage("Network or server error.")}}))})}successMessage(a){y().fire(a,"","success"),this.router.navigate(["/main-nav/putawayLocation-case2/read"])}failureMessage(a){y().fire(a,"","error")}closeDialog(){this.dialogRef.close()}}return o.\u0275fac=function(a){return new(a||o)(t.Y36(d.F0),t.Y36(P.y),t.Y36(Z.J),t.Y36(g.WI),t.Y36(s.qu),t.Y36(d.gz),t.Y36(g.so))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-putaway-delete"]],standalone:!0,features:[t.jDz],decls:46,vars:1,consts:[[1,"over-Flow"],[1,"main-header-title"],["mat-icon-button","",3,"click"],["mat-icon-button","","color","primary"],[1,"tally-serach-form"],[3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","Tally"],["matInput","","formControlName","Line"],["matInput","","formControlName","Item"],["matInput","","formControlName","PalletQuantity"],["matInput","","formControlName","Serial"],["matInput","","formControlName","Location"],["matInput","","formControlName","Quantity"],["matInput","","formControlName","Bucket"],["mat-button","","mat-raised-button","",1,"buttons","removeButton",3,"click"]],template:function(a,e){1&a&&(t.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-card-header")(3,"mat-card-title"),t._uU(4,"Maintain Putaway Locations"),t.qZA()(),t.TgZ(5,"button",2),t.NdJ("click",function(){return e.closeDialog()}),t.TgZ(6,"mat-icon",3),t._uU(7,"close"),t.qZA()()(),t.TgZ(8,"mat-card-content",4)(9,"form",5)(10,"div",6)(11,"div",7)(12,"mat-form-field",8)(13,"mat-label"),t._uU(14," Tally "),t.qZA(),t._UZ(15,"input",9),t.qZA(),t.TgZ(16,"mat-form-field",8)(17,"mat-label"),t._uU(18," Line "),t.qZA(),t._UZ(19,"input",10),t.qZA(),t.TgZ(20,"mat-form-field",8)(21,"mat-label"),t._uU(22," Item "),t.qZA(),t._UZ(23,"input",11),t.qZA(),t.TgZ(24,"mat-form-field",8)(25,"mat-label"),t._uU(26,"Pallet Quantity "),t.qZA(),t._UZ(27,"input",12),t.qZA(),t.TgZ(28,"mat-form-field",8)(29,"mat-label"),t._uU(30," Serial"),t.qZA(),t._UZ(31,"input",13),t.qZA(),t.TgZ(32,"mat-form-field",8)(33,"mat-label"),t._uU(34," Location"),t.qZA(),t._UZ(35,"input",14),t.qZA(),t.TgZ(36,"mat-form-field",8)(37,"mat-label"),t._uU(38," Quantity "),t.qZA(),t._UZ(39,"input",15),t.qZA(),t.TgZ(40,"mat-form-field",8)(41,"mat-label"),t._uU(42," Bucket"),t.qZA(),t._UZ(43,"input",16),t.qZA()()(),t.TgZ(44,"button",17),t.NdJ("click",function(){return e.deletePutawayLocation()}),t._uU(45,"Delete "),t.qZA()()()()),2&a&&(t.xp6(9),t.Q6J("formGroup",e.form))},dependencies:[T.m,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,w.Hw,A.lW,b.KE,b.hX,U.Nt,h.a8,h.dk,h.dn,h.n5]}),o})();var q=l(15627),I=l(11240),Q=l(36895),k=l(10266);function x(o,n){if(1&o){const a=t.EpF();t.TgZ(0,"button",23),t.NdJ("click",function(){t.CHM(a);const i=t.oxw();return t.KtG(i.searchPutAwayLocation())}),t.TgZ(1,"mat-icon"),t._uU(2,"clear"),t.qZA()()}}function Y(o,n){if(1&o){const a=t.EpF();t.TgZ(0,"button",24),t.NdJ("click",function(){t.CHM(a);const i=t.oxw();return t.KtG(i.searchPutAwayLocation())}),t.TgZ(1,"mat-icon"),t._uU(2,"search"),t.qZA()()}}function J(o,n){if(1&o){const a=t.EpF();t.TgZ(0,"form",25)(1,"div",26)(2,"div",27)(3,"mat-form-field",28)(4,"mat-label"),t._uU(5,"Tally"),t.qZA(),t._UZ(6,"input",29),t.qZA(),t.TgZ(7,"mat-form-field",28)(8,"mat-label"),t._uU(9,"Line"),t.qZA(),t._UZ(10,"input",30),t.qZA(),t.TgZ(11,"mat-form-field",28)(12,"mat-label"),t._uU(13,"Item"),t.qZA(),t._UZ(14,"input",31),t.qZA(),t.TgZ(15,"mat-form-field",28)(16,"mat-label"),t._uU(17,"Building"),t.qZA(),t._UZ(18,"input",32),t.qZA(),t.TgZ(19,"mat-form-field",28)(20,"mat-label"),t._uU(21,"Description"),t.qZA(),t._UZ(22,"input",33),t.qZA(),t.TgZ(23,"div",34)(24,"label",35),t._uU(25,"Lot Codes :"),t.qZA(),t.TgZ(26,"div",36)(27,"mat-form-field",28)(28,"mat-label"),t._uU(29,"Lot 1"),t.qZA(),t._UZ(30,"input",37),t.qZA(),t.TgZ(31,"mat-form-field",28)(32,"mat-label"),t._uU(33,"Lot 2"),t.qZA(),t._UZ(34,"input",38),t.qZA(),t.TgZ(35,"mat-form-field",28)(36,"mat-label"),t._uU(37,"Lot 3"),t.qZA(),t._UZ(38,"input",39),t.qZA()()(),t.TgZ(39,"mat-form-field",28)(40,"mat-label"),t._uU(41,"Quantity"),t.qZA(),t._UZ(42,"input",40),t.qZA(),t.TgZ(43,"mat-form-field",28)(44,"mat-label"),t._uU(45,"Pallet Quantity"),t.qZA(),t._UZ(46,"input",41),t.qZA(),t.TgZ(47,"mat-form-field",28)(48,"mat-label"),t._uU(49,"Remaining"),t.qZA(),t._UZ(50,"input",42),t.qZA(),t.TgZ(51,"mat-form-field",28)(52,"mat-label"),t._uU(53,"Over"),t.qZA(),t._UZ(54,"input",43),t.qZA(),t.TgZ(55,"mat-form-field",28)(56,"mat-label"),t._uU(57,"Short"),t.qZA(),t._UZ(58,"input",44),t.qZA()()(),t.TgZ(59,"button",45),t.NdJ("click",function(){t.CHM(a);const i=t.oxw();return t.KtG(i.savePutawayDetails())}),t._uU(60," putaway "),t.qZA()()}if(2&o){const a=t.oxw();t.Q6J("formGroup",a.form)}}function B(o,n){1&o&&(t.TgZ(0,"th",46),t._uU(1,"Serial Number"),t.qZA())}function M(o,n){if(1&o&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&o){const a=n.$implicit;t.xp6(1),t.Oqu(a.WSRL)}}function R(o,n){1&o&&(t.TgZ(0,"th",46),t._uU(1,"Location"),t.qZA())}function W(o,n){if(1&o&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&o){const a=n.$implicit;t.xp6(1),t.hij("",a.WLOCN," ")}}function F(o,n){1&o&&(t.TgZ(0,"th",46),t._uU(1,"Type"),t.qZA())}function O(o,n){if(1&o&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&o){const a=n.$implicit;t.xp6(1),t.Oqu(a.WITYP)}}function H(o,n){1&o&&(t.TgZ(0,"th",46),t._uU(1,"Quantity"),t.qZA())}function z(o,n){if(1&o&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&o){const a=n.$implicit;t.xp6(1),t.Oqu(0!==a.WQTY?a.WQTY:"")}}function G(o,n){1&o&&(t.TgZ(0,"th",46),t._uU(1,"Status"),t.qZA())}function E(o,n){if(1&o&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&o){const a=n.$implicit;t.xp6(1),t.Oqu(a.WSTAT)}}function j(o,n){1&o&&t._UZ(0,"th",48)}function X(o,n){if(1&o){const a=t.EpF();t.TgZ(0,"td",47)(1,"div",49)(2,"button",50)(3,"mat-icon"),t._uU(4,"more_vert"),t.qZA()(),t.TgZ(5,"ul",51)(6,"li")(7,"button",52),t.NdJ("click",function(){const r=t.CHM(a).$implicit,c=t.oxw();return t.KtG(c.updatePutawayLocation(r))}),t.TgZ(8,"mat-icon",53),t._uU(9,"edit"),t.qZA(),t.TgZ(10,"mat-label"),t._uU(11,"Update"),t.qZA()()(),t.TgZ(12,"li")(13,"button",52),t.NdJ("click",function(){const r=t.CHM(a).$implicit,c=t.oxw();return t.KtG(c.deletePutawayLocation(r))}),t.TgZ(14,"mat-icon",54),t._uU(15,"delete"),t.qZA(),t.TgZ(16,"mat-label"),t._uU(17,"Delete"),t.qZA()()()()()()}}function K(o,n){1&o&&t._UZ(0,"tr",55)}function $(o,n){1&o&&t._UZ(0,"tr",56)}const V=function(){return[8,16,24]};let tt=(()=>{class o{constructor(a,e,i,r,c,u,v){this.iHeaderSvc=a,this.storerService=e,this.TallyDetailWorkService=i,this.fb=r,this.router=c,this.matDialog=u,this.CustomAlertService=v,this.searchTextDisplay=!1,this.user=localStorage.getItem("userName")||"",this.pageNumber=1,this.pageSize=8,this.totalRecords=0,this.displayedColumns=["SerialNumber","Location","Type","Quantity","Status","Actions"],this.dataSource=new p.by([]),this.duplicateSource=[],this.subscriptions=[]}ngOnInit(){this.historyState=history.state,console.log("History State:",this.historyState);const a=Number(this.historyState[0]?.IDTALY||0),e=Number(this.historyState[0]?.IDSEQ||0);this.form=this.fb.group({tally:[a],line:[e],Building:[""],Item:[this.historyState[0]?.IDITEM||""],Description:[""],LotCode1:[""],LotCode2:[""],LotCode3:[""],Quantity:[""],PalletQuantity:[""],over:[""],short:[""],Remaining:[""]}),this.loadPutawayLocation(this.pageSize,1),this.dataSource.filterPredicate=this.createFilter()}ngOnDestroy(){this.subscriptions.forEach(a=>a.unsubscribe())}searchPutAwayLocation(){this.searchTextDisplay=1!=this.searchTextDisplay}loadPutawayLocation(a,e){const i=this.form.value;console.log("Calling API with:",{user:this.user,tally:i.tally,line:i.line}),this.subscriptions.push(this.TallyDetailWorkService.PutAwayLocationCase(this.user,i.tally,i.line,a,e).subscribe(r=>{try{const u=JSON.parse(r[0].data[1]?.value);this.res1=u,Array.isArray(u.returnedData)?(this.dataSource=new p.by(u.returnedData),this.dataSource.data=u.returnedData,this.totalRecords=u.TotalRecords,this.form.patchValue({Building:u.Building||"",Description:u.Description||"",LotCode1:u.LotCode1||"",LotCode2:u.LotCode2||"",LotCode3:u.LotCode3||"",Quantity:u.Quantity||"",PalletQuantity:u.PalletQuantity||"",over:0===u.Over?"":u.Over,short:0===u.Short?"":u.Short,Remaining:u.Remaining||""})):(this.dataSource=new p.by([]),this.totalRecords=0)}catch(u){console.error("Error parsing data:",u),this.dataSource=new p.by([]),this.totalRecords=0}}))}createFilter(){return(a,e)=>{const i=JSON.parse(e);return Object.keys(i).every(r=>a[r]?.toString().toLowerCase().includes(i[r]?.toLowerCase()??""))}}onPaginateChange(a){this.pageSize=a.pageSize,this.pageNumber=a.pageIndex+1,this.loadPutawayLocation(this.pageSize,this.pageNumber)}savePutawayDetails(){const a=this.form.getRawValue(),e={user:this.user||"",tally:Number(a.tally)||0,sequence:Number(a.line)||0,over:Number(a.over)||0,short:Number(a.short)||0};console.log("Save Payload:",e),this.TallyDetailWorkService.updatePutawayLocation(e).subscribe({next:i=>{const r=JSON.parse(i[0].data[1]?.value);r.success?(this.form.patchValue({Remaining:r.Remaining??this.form.value.Remaining,over:r.Over??this.form.value.over,short:r.Short??this.form.value.short},{emitEvent:!1}),this.successMessage(r.returnedData?.message||"Updated Successfully"),this.searchTextDisplay=!0,this.router.navigate(["/main-nav/putawayLocation-case2/read"],{state:[{IDTALY:this.form.value.tally,IDSEQ:this.form.value.line,IDITEM:this.form.value.Item,WDQREM:this.form.value.Remaining,WDQOVR:this.form.value.over,WDQSHT:this.form.value.short}]})):this.failureMessage(r.returnedData?.message||"Update failed")},error:i=>{console.error("Save failed:",i),this.failureMessage("An error occurred while saving")}})}createPutawayLocation(){var a=history.state;this.matDialog.open(S,{width:"1000px",maxHeight:"80vh",data:[this.res1,a],autoFocus:!1})}updatePutawayLocation(a){const e=history.state;this.matDialog.open(N,{width:"1000px",maxHeight:"80vh",data:[this.res1,e,a],autoFocus:!1})}deletePutawayLocation(a){const e=history.state;this.matDialog.open(D,{width:"1000px",maxHeight:"80vh",data:[this.res1,e,a],autoFocus:!1})}successMessage(a){y().fire(a,"","success"),this.router.navigate(["/main-nav/putawayLocation-case2/read"])}failureMessage(a){y().fire(a,"","error")}onBack(){this.router.navigateByUrl("/main-nav/tallys/details",{state:this.historyState})}}return o.\u0275fac=function(a){return new(a||o)(t.Y36(q.X),t.Y36(I.h),t.Y36(Z.J),t.Y36(s.qu),t.Y36(d.F0),t.Y36(g.uw),t.Y36(P.y))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-putawaylocation"]],viewQuery:function(a,e){if(1&a&&t.Gf(C.NW,5),2&a){let i;t.iGM(i=t.CRH())&&(e.paginator=i.first)}},standalone:!0,features:[t.jDz],decls:38,vars:10,consts:[[1,"over-Flow"],["fxLayoutAlign","center"],["mat-button","",1,"backButton","go-back-btn",3,"click"],[1,"buttons"],["mat-button","","class","addButton",3,"click",4,"ngIf"],["mat-button","","class","addButton","matTooltip","Search Tally Detais Putaway Location",3,"click",4,"ngIf"],["mat-button","","matTooltip","Add Tally Details Putaway Location",1,"addButton",3,"click"],[1,"tally-serach-form"],["class","form over-Flow",3,"formGroup",4,"ngIf"],["mat-table","",1,"mat-elevation-z8","tally-table",3,"dataSource"],["matColumnDef","SerialNumber"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Location"],["matColumnDef","Type"],["matColumnDef","Quantity"],["matColumnDef","Status"],["matColumnDef","Actions"],["mat-header-cell","","mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",1,"tally-table-pagination",3,"length","pageSizeOptions","pageSize","page"],["paginator",""],["mat-button","",1,"addButton",3,"click"],["mat-button","","matTooltip","Search Tally Detais Putaway Location",1,"addButton",3,"click"],[1,"form","over-Flow",3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","tally"],["matInput","","formControlName","line"],["matInput","","formControlName","Item"],["matInput","","formControlName","Building"],["matInput","","formControlName","Description"],[1,"form-group1"],["for","inputField",1,"form-heading"],[1,"form-input"],["matInput","","formControlName","LotCode1","readonly",""],["matInput","","formControlName","LotCode2","readonly",""],["matInput","","formControlName","LotCode3","readonly",""],["matInput","","formControlName","Quantity","readonly",""],["matInput","","formControlName","PalletQuantity","readonly",""],["matInput","","formControlName","Remaining","readonly",""],["matInput","","formControlName","over"],["matInput","","formControlName","short"],["mat-raised-button","","type","submit",1,"buttons","addButton","tally-search-btn",3,"click"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","","mat-header-cell",""],[1,"dropdown","more_options_btn"],["type","button","id","dropdownMenuButton1","data-bs-toggle","dropdown","aria-expanded","false",1,"btn"],["aria-labelledby","dropdownMenuButton1",1,"dropdown-menu"],["mat-icon-button","",3,"click"],["mat-icon-button","","color","primary"],["mat-icon-button","","color","warn"],["mat-header-row",""],["mat-row",""]],template:function(a,e){1&a&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1)(3,"button",2),t.NdJ("click",function(){return e.onBack()}),t.TgZ(4,"mat-icon"),t._uU(5,"navigate_before "),t.qZA()(),t._uU(6," Maintain Putaway Locations "),t.qZA(),t.TgZ(7,"div",3),t.YNc(8,x,3,0,"button",4),t.YNc(9,Y,3,0,"button",5),t.TgZ(10,"button",6),t.NdJ("click",function(){return e.createPutawayLocation()}),t.TgZ(11,"mat-icon"),t._uU(12,"add"),t.qZA()()()(),t.TgZ(13,"mat-card-content",7),t.YNc(14,J,61,1,"form",8),t.qZA(),t.TgZ(15,"table",9),t.ynx(16,10),t.YNc(17,B,2,0,"th",11),t.YNc(18,M,2,1,"td",12),t.BQk(),t.ynx(19,13),t.YNc(20,R,2,0,"th",11),t.YNc(21,W,2,1,"td",12),t.BQk(),t.ynx(22,14),t.YNc(23,F,2,0,"th",11),t.YNc(24,O,2,1,"td",12),t.BQk(),t.ynx(25,15),t.YNc(26,H,2,0,"th",11),t.YNc(27,z,2,1,"td",12),t.BQk(),t.ynx(28,16),t.YNc(29,G,2,0,"th",11),t.YNc(30,E,2,1,"td",12),t.BQk(),t.ynx(31,17),t.YNc(32,j,1,0,"th",18),t.YNc(33,X,18,0,"td",12),t.BQk(),t.YNc(34,K,1,0,"tr",19),t.YNc(35,$,1,0,"tr",20),t.qZA(),t.TgZ(36,"mat-paginator",21,22),t.NdJ("page",function(r){return e.onPaginateChange(r)}),t.qZA()()),2&a&&(t.xp6(8),t.Q6J("ngIf",e.searchTextDisplay),t.xp6(1),t.Q6J("ngIf",!e.searchTextDisplay),t.xp6(5),t.Q6J("ngIf",e.searchTextDisplay),t.xp6(1),t.Q6J("dataSource",e.dataSource),t.xp6(19),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns),t.xp6(1),t.Q6J("length",e.totalRecords)("pageSizeOptions",t.DdM(9,V))("pageSize",e.pageSize))},dependencies:[T.m,Q.O5,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,C.NW,w.Hw,A.lW,b.KE,b.hX,U.Nt,h.a8,h.dk,h.dn,h.n5,p.BZ,p.fO,p.as,p.w1,p.Dz,p.nj,p.ge,p.ev,p.XQ,p.Gk,k.gM]}),o})()}}]);