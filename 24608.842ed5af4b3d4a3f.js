"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[24608],{57180:(U,E,n)=>{n.d(E,{e:()=>t});var C=n(80529),u=n(75625),S=n(70262),K=n(62843),T=n(92340),D=n(94650);let t=(()=>{class h{constructor(a){this.httpClient=a,this.url=T.N.API_BASE_URL,this.httpHeader={headers:new C.WM({"Content-Type":"application/json"})}}readItemKit(a,s,m,l,_,p){return this.httpClient.get(`${this.url}/itemKit/read?user=${a}&storer=${s}&suffix=${m}&item=${l}&recordsPerPage=${_}&pageNum=${p}`)}createItemKit(a,s,m,l,_,p,g,d,v){return this.httpClient.post(this.url+"/itemKit/create",{user:a,storer:s,suffix:m,item:l,componentItem:_,quantity:p,commit:g,trackComponent:d,unit:v}).pipe((0,u.X)(1),(0,S.K)(this.httpError))}updateItemKit(a,s,m,l,_,p,g,d,v,Z){return this.httpClient.put(this.url+"/itemKit/update",{user:a,storer:s,suffix:m,item:l,sequence:_,componentItem:p,quantity:g,commit:d,trackComponent:v,unit:Z}).pipe((0,u.X)(1),(0,S.K)(this.httpError))}deleteItemKit(a,s,m,l,_){return this.httpClient.delete(this.url+`/itemKit/delete?user=${a}&storer=${s}&suffix=${m}&item=${l}&sequence=${_}`)}itemOrder(a,s,m,l,_,p,g){return this.httpClient.get(`${this.url}/itemKit/order?user=${a}&storer=${s}&suffix=${m}&item=${l}&status=${_}&recordsPerPage=${p}&pageNum=${g}`)}itemStock(a,s,m,l,_,p,g,d,v){return this.httpClient.get(`${this.url}/itemKit/kitStock?user=${a}&storer=${s}&suffix=${m}&item=${l}&startDate=${_}&endDate=${p}&adjacent=${g}&recordsPerPage=${d}&pageNum=${v}`)}itemPickInquiry(a,s,m,l,_,p){return this.httpClient.get(`${this.url}/itemKit/pickInquiry?user=${a}&storer=${s}&suffix=${m}&item=${l}&recordsPerPage=${_}&pageNum=${p}`)}kitPickSheet(a,s,m,l){return this.httpClient.put(this.url+"/itemKit/pickSheet",{user:a,storer:s,suffix:m,item:l}).pipe((0,u.X)(1),(0,S.K)(this.httpError))}stockActivityPrint(a,s,m,l,_,p){return this.httpClient.put(this.url+"/item/stockActivityPrint",{storer:a,suffix:s,item:m,start:l,end:_,adjustment:p}).pipe((0,u.X)(1),(0,S.K)(this.httpError))}stockActivityEmail(a,s){return this.httpClient.put(this.url+"/item/stockActivityEmail",{extension:a,email:s}).pipe((0,u.X)(1),(0,S.K)(this.httpError))}httpError(a){let s="";return s=a.error instanceof ErrorEvent?a.error.message:`Error Code: ${a.status}\nMessage: ${a.message}`,console.log(s),(0,K._)(()=>new Error(s))}}return h.\u0275fac=function(a){return new(a||h)(D.LFG(C.eN))},h.\u0275prov=D.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})()},24608:(U,E,n)=>{n.r(E),n.d(E,{KitStockActivityComponent:()=>j});var C=n(98739),u=n(7155),S=n(70879),K=n(35226),T=n.n(K),D=n(48529),t=n(94650),h=n(24006),k=n(57180),a=n(19132),s=n(97392),m=n(4859),l=n(59549),_=n(44144),p=n(84385),g=n(3238),d=n(73546);function v(e,r){1&e&&(t.TgZ(0,"th",34),t._uU(1,"Date"),t.qZA())}function Z(e,r){if(1&e&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&e){const i=r.$implicit;t.xp6(1),t.Oqu(i.SDATE)}}function O(e,r){1&e&&(t.TgZ(0,"th",34),t._uU(1,"Storer Reference"),t.qZA())}function M(e,r){if(1&e&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&e){const i=r.$implicit;t.xp6(1),t.Oqu(i.SAREF)}}function P(e,r){1&e&&(t.TgZ(0,"th",34),t._uU(1,"Wr/BOL"),t.qZA())}function B(e,r){if(1&e&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&e){const i=r.$implicit;t.xp6(1),t.Oqu(i.SAABTA)}}function I(e,r){1&e&&(t.TgZ(0,"th",34),t._uU(1,"Description"),t.qZA())}function N(e,r){if(1&e&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&e){const i=r.$implicit;t.xp6(1),t.Oqu(i.SADESC)}}function $(e,r){if(1&e&&(t.TgZ(0,"th",36),t._uU(1),t.qZA()),2&e){const i=t.oxw();t.xp6(1),t.hij(" ",i.SUNITS," ")}}function R(e,r){1&e&&(t.TgZ(0,"th",34),t._uU(1,"Amount"),t.qZA())}function b(e,r){if(1&e&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&e){const i=r.$implicit;t.xp6(1),t.Oqu(i.SIQTY)}}function x(e,r){1&e&&(t.TgZ(0,"th",34),t._uU(1,"Balance"),t.qZA())}function W(e,r){if(1&e&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&e){const i=r.$implicit;t.xp6(1),t.Oqu(i.SABALN)}}function L(e,r){1&e&&(t.TgZ(0,"th",37),t._uU(1,"Actions "),t.qZA())}function Y(e,r){if(1&e){const i=t.EpF();t.TgZ(0,"td",35)(1,"div",38)(2,"button",39)(3,"mat-icon"),t._uU(4,"more_vert"),t.qZA()(),t.TgZ(5,"ul",40)(6,"li")(7,"button",41),t.NdJ("click",function(){const f=t.CHM(i).$implicit,A=t.oxw();return t.KtG(A.stockActivityPrint(f))}),t.TgZ(8,"mat-icon",42),t._uU(9,"task"),t.qZA(),t.TgZ(10,"mat-label"),t._uU(11,"Stock Activity Print"),t.qZA()()(),t.TgZ(12,"li")(13,"button",41),t.NdJ("click",function(){const f=t.CHM(i).$implicit,A=t.oxw();return t.KtG(A.stockActivityEmail(f))}),t.TgZ(14,"mat-icon",42),t._uU(15,"task"),t.qZA(),t.TgZ(16,"mat-label"),t._uU(17,"Stock Activity Email"),t.qZA()()()()()()}}function q(e,r){1&e&&t._UZ(0,"tr",43)}function w(e,r){1&e&&t._UZ(0,"tr",43)}function Q(e,r){1&e&&t._UZ(0,"tr",44)}const z=function(){return["Date","StorerReference","WrBol","Description","Units","Actions"]},F=function(){return["Amount","Balance"]},J=function(){return[8,16,24]};let j=(()=>{class e{constructor(i,o,c,f){this.fb=i,this.iKitService=o,this.cdr=c,this.router=f,this.displayedColumns=["Date","StorerReference","WrBol","Description","Amount","Balance","Actions"],this.pageSize=8,this.totalRecords=0,this.currentFilters=null,this.pageNumber=1,this.user=localStorage.getItem("userName")||"",this.dataSource1=[],this.storer="",this.item="",this.key="",this.value="",this.date=new Date,this.firstDay=new Date(this.date.getFullYear(),this.date.getMonth(),1),this.lastDay=new Date(this.date.getFullYear(),this.date.getMonth()+1,0),this.dataSource=new u.by,this.start="",this.end="",this.ItemRoute="/main-nav/item/kit/read",this.formatDate=A=>{const y=new Date(A);return`${String(y.getMonth()+1).padStart(2,"0")}${String(y.getDate()).padStart(2,"0")}${String(y.getFullYear()).slice(-2)}`}}ngOnInit(){this.element=history.state,this.storerValue=this.element[0].WKSTOR,this.form=this.fb.group({start:this.firstDay.toLocaleDateString("fr-CA"),end:this.lastDay.toLocaleDateString("fr-CA"),locationAdj:"N"}),this.item=this.element[1].WCODSC+" "+this.element[1].WCODSC1,this.stockActivity(this.pageSize,this.pageNumber),this.cdr.detectChanges()}stockActivity(i,o){var c=this.form.value;this.stockActivitySubscription&&this.stockActivitySubscription.unsubscribe(),this.iKitService.itemStock(this.user,this.element[0].WKSTOR,this.element[0].WKSSFX,this.element[1].WCODSC,c.start,c.end,c.locationAdj,i,o).subscribe(f=>{var A=JSON.parse(f[0].data[1]?.value);this.dataSource.data=A.returnedData,this.totalRecords=A.TotalRecords,this.duplicateSource=A.returnedData,this.SUNITS=this.duplicateSource[0]?.SUNITS})}ngOnDestroy(){this.stockActivitySubscription&&this.stockActivitySubscription.unsubscribe()}onBack(){this.router.navigateByUrl(this.ItemRoute,{state:this.element[0]})}onPaginateChange(i){this.pageSize=i.pageSize,this.stockActivity(i.pageSize,i.pageIndex+1)}getStockBySearch(i){this.currentFilters=i,this.paginator.firstPage(),this.stockActivity(this.pageSize,this.pageNumber)}stockActivityPrint(i){console.log(i),this.stockActivitySubscription=this.iKitService.stockActivityPrint(this.storerValue,this.element[0].WKSSFX,this.element[1].WCODSC,this.formatDate(i.SASTRD),this.formatDate(i.SAENDD),i.SLADJS).subscribe(o=>{const c=o[0].data[o[0].data.length-1].value;console.log(c),c===D.R.ReportCreateMessage?(this.successMessage(c),this.stockActivity(this.pageNumber,this.pageSize)):this.failureMessage(c)})}stockActivityEmail(i){this.stockActivitySubscription=this.iKitService.stockActivityEmail("","").subscribe(o=>{const c=o[0].data[o[0].data.length-1].value;c.toUpperCase()===D.R.submit.toUpperCase()?(this.successMessage(c),this.stockActivity(this.pageNumber,this.pageSize)):this.failureMessage(c)})}successMessage(i){T().fire(i,"","success")}failureMessage(i){T().fire(i,"","error")}}return e.\u0275fac=function(i){return new(i||e)(t.Y36(h.qu),t.Y36(k.e),t.Y36(t.sBO),t.Y36(a.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-kit-stock-activity"]],viewQuery:function(i,o){if(1&i&&t.Gf(C.NW,5),2&i){let c;t.iGM(c=t.CRH())&&(o.paginator=c.first)}},standalone:!0,features:[t.jDz],decls:66,vars:13,consts:[[1,"over-Flow"],[1,"title"],["mat-button","",1,"backButton","go-back-btn",3,"click"],[1,"tally-serach-form"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["readonly","","matInput","",3,"value"],["appearance","outline",1,"full-width2"],["appearance","outline"],["matInput","","type","Date","formControlName","start"],["matInput","","type","Date","formControlName","end"],["formControlName","locationAdj"],["value","N"],["value","Y"],["mat-raised-button","","type","submit","placeholder","Search",1,"buttons","addButton","tally-search-btn"],["mat-table","",1,"mat-elevation-z8","tally-table",3,"dataSource"],["matColumnDef","Date"],["mat-header-cell","","rowspan","2",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","StorerReference"],["matColumnDef","WrBol"],["matColumnDef","Description"],["matColumnDef","Units"],["mat-header-cell","","colspan","2",4,"matHeaderCellDef"],["matColumnDef","Amount"],["matColumnDef","Balance"],["matColumnDef","Actions"],["mat-header-cell","","rowspan","2","class","pending_actions_sec",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",1,"tally-table-pagination",3,"length","pageSizeOptions","pageSize","page"],["paginator",""],["mat-header-cell","","rowspan","2"],["mat-cell",""],["mat-header-cell","","colspan","2"],["mat-header-cell","","rowspan","2",1,"pending_actions_sec"],[1,"dropdown","more_options_btn"],["type","button","id","dropdownMenuButton1","data-bs-toggle","dropdown","aria-expanded","false",1,"btn"],["aria-labelledby","dropdownMenuButton1",1,"dropdown-menu"],["mat-icon-button","",3,"click"],["mat-icon-button","","color","primary"],["mat-header-row",""],["mat-row",""]],template:function(i,o){1&i&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1)(3,"button",2),t.NdJ("click",function(){return o.onBack()}),t.TgZ(4,"mat-icon"),t._uU(5,"navigate_before "),t.qZA()(),t._uU(6,"Stock Activity Inquiry"),t.qZA()(),t.TgZ(7,"mat-card-content",3)(8,"form",4),t.NdJ("ngSubmit",function(){return o.getStockBySearch(o.form.value)}),t.TgZ(9,"div",5)(10,"div",6)(11,"mat-form-field",7)(12,"mat-label"),t._uU(13,"Storer"),t.qZA(),t._UZ(14,"input",8),t.qZA(),t.TgZ(15,"mat-form-field",9)(16,"mat-label"),t._uU(17,"Item"),t.qZA(),t._UZ(18,"input",8),t.qZA(),t.TgZ(19,"mat-form-field",10)(20,"mat-label"),t._uU(21,"Start"),t.qZA(),t._UZ(22,"input",11),t.qZA(),t.TgZ(23,"mat-form-field",10)(24,"mat-label"),t._uU(25,"End"),t.qZA(),t._UZ(26,"input",12),t.qZA(),t.TgZ(27,"mat-form-field",7)(28,"mat-label"),t._uU(29,"Location Adjustment"),t.qZA(),t.TgZ(30,"mat-select",13)(31,"mat-option",14),t._uU(32,"No"),t.qZA(),t.TgZ(33,"mat-option",15),t._uU(34,"Yes"),t.qZA()()()()(),t.TgZ(35,"button",16),t._uU(36," Search "),t.qZA()()(),t.TgZ(37,"table",17),t.ynx(38,18),t.YNc(39,v,2,0,"th",19),t.YNc(40,Z,2,1,"td",20),t.BQk(),t.ynx(41,21),t.YNc(42,O,2,0,"th",19),t.YNc(43,M,2,1,"td",20),t.BQk(),t.ynx(44,22),t.YNc(45,P,2,0,"th",19),t.YNc(46,B,2,1,"td",20),t.BQk(),t.ynx(47,23),t.YNc(48,I,2,0,"th",19),t.YNc(49,N,2,1,"td",20),t.BQk(),t.ynx(50,24),t.YNc(51,$,2,1,"th",25),t.BQk(),t.ynx(52,26),t.YNc(53,R,2,0,"th",19),t.YNc(54,b,2,1,"td",20),t.BQk(),t.ynx(55,27),t.YNc(56,x,2,0,"th",19),t.YNc(57,W,2,1,"td",20),t.BQk(),t.ynx(58,28),t.YNc(59,L,2,0,"th",29),t.YNc(60,Y,18,0,"td",20),t.BQk(),t.YNc(61,q,1,0,"tr",30),t.YNc(62,w,1,0,"tr",30),t.YNc(63,Q,1,0,"tr",31),t.qZA(),t.TgZ(64,"mat-paginator",32,33),t.NdJ("page",function(f){return o.onPaginateChange(f)}),t.qZA()()),2&i&&(t.xp6(8),t.Q6J("formGroup",o.form),t.xp6(6),t.s9C("value",o.storerValue),t.xp6(4),t.s9C("value",o.item),t.xp6(19),t.Q6J("dataSource",o.dataSource),t.xp6(24),t.Q6J("matHeaderRowDef",t.DdM(10,z)),t.xp6(1),t.Q6J("matHeaderRowDef",t.DdM(11,F)),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("length",o.totalRecords)("pageSizeOptions",t.DdM(12,J))("pageSize",o.pageSize))},dependencies:[S.m,h._Y,h.Fj,h.JJ,h.JL,h.sg,h.u,C.NW,s.Hw,m.lW,l.KE,l.hX,_.Nt,p.gD,g.ey,d.a8,d.dk,d.dn,d.n5,u.BZ,u.fO,u.as,u.w1,u.Dz,u.nj,u.ge,u.ev,u.XQ,u.Gk]}),e})()}}]);