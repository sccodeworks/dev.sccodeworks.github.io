"use strict";(self.webpackChunksc_codeworks_app=self.webpackChunksc_codeworks_app||[]).push([[17540],{17540:(E,f,s)=>{s.r(f),s.d(f,{AvailableQuantityComponent:()=>B});var c=s(98739),u=s(7155),b=s(70879),o=s(24006),p=s(65412),A=s(48529),_=s(35226),Z=s.n(_),t=s(94650),v=s(15627),g=s(19132),T=s(97392),y=s(4859),h=s(59549),Q=s(44144),m=s(73546);let C=(()=>{class i{constructor(e,a,n,r,d,M,z){this.fb=e,this.iheaderSvc=a,this.matDialog=n,this.router=r,this.anyvariable=d,this.cdRef=M,this.dialogRef=z,this.dataSource=new u.by,this.user=localStorage.getItem("userName")||"",this.update=!1,this.type=[],this.tallyNumber=0,this.line=0,this.item="",this.lots="",this.sequence=0,this.received=0,this.intransit=0,this.over=0,this.short=0,this.remaining=0,this.user1="",this.user2="",this.user3="",this.user4="",this.available=0,this.hold=0,this.damaged=0,this.newLine=0,this.newTally=0,this.recordsPerPage=8,this.pageNumber=1,this.quantityUrl="/main-nav/tallys/copy/available"}ngOnInit(){console.log(this.anyvariable),this.form=this.fb.group({transferQuantity:["",[o.kI.required,o.kI.pattern(/^\d{1,7}$/)]]}),this.transfer()}transfer(){this.availableSubscription&&this.availableSubscription.unsubscribe(),this.availableSubscription=this.iheaderSvc.TransferIntransit(this.user,this.anyvariable[0][0],this.anyvariable[0][1].IHTALY,this.anyvariable[1].IDSEQ,this.recordsPerPage,this.pageNumber).subscribe(e=>{const n=JSON.parse(e[0].data[1]?.value).returnedData;this.output=n[0],this.dataSource.data=this.output,console.log(this.output),this.tallyNumber=this.output.WKOTALY,this.line=this.output.WKOLINE,this.item=this.output.IDITEM,this.lots=this.output.IDLOT+"\xa0"+this.output.IDLTC1+"\xa0"+this.output.IDLTC2,this.sequence=this.output.WKOSEQ,this.received=this.output.IDQREC,this.intransit=this.output.IDQINT,this.over=this.output.IDQOVR,this.short=this.output.IDQSHT,this.remaining=this.output.WQTOT,this.user1=this.output.IDQUS1,this.user2=this.output.IDQUS2,this.user3=this.output.IDQUS3,this.user4=this.output.IDQUS4,this.available=this.output.IDQNOR,this.hold=this.output.IDQHLD,this.damaged=this.output.IDQDAM,this.newLine=this.output.WSEQ,this.newTally=this.output.WKTALY,this.cdRef.detectChanges()})}ngOnDestroy(){this.availableSubscription&&this.availableSubscription.unsubscribe()}updateTransfer(){this.availableSubscription&&this.availableSubscription.unsubscribe(),this.availableSubscription=this.iheaderSvc.updateTransfer(this.user,this.newTally,this.tallyNumber,this.sequence,this.item,this.output.IDLOT,this.output.IDLTC1,this.output.IDLTC2,this.received,this.intransit,this.over,this.short,this.remaining,this.user1,this.available,this.user2,this.hold,this.user3,this.damaged,this.user4,this.newLine,this.form.value.transferQuantity).subscribe(e=>{const n=JSON.parse(e[0].data[e[0].data.length-1].value).returnedData.message;n?.toUpperCase()===A.R.updated.toUpperCase()?(this.successMessage(n),this.closeDialog(),this.router.navigateByUrl(this.quantityUrl,{state:this.anyvariable[0]})):this.failureMessage(n)})}successMessage(e){Z().fire(e,"","success")}failureMessage(e){Z().fire(e,"","error")}closeDialog(){this.dialogRef.close()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(o.qu),t.Y36(v.X),t.Y36(p.uw),t.Y36(g.F0),t.Y36(p.WI),t.Y36(t.sBO),t.Y36(p.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-transfer"]],viewQuery:function(e,a){if(1&e&&t.Gf(c.NW,5),2&e){let n;t.iGM(n=t.CRH())&&(a.paginator=n.first)}},standalone:!0,features:[t.jDz],decls:90,vars:38,consts:[[1,"main-header-title"],["mat-icon-button","",3,"click"],["mat-icon-button","","color","primary"],[1,"tally-serach-form"],[3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","",3,"disabled","value"],["matInput","","formControlName","transferQuantity"],["type","submit","mat-raised-button","",1,"buttons","addButton","new-tally-form-btn",3,"disabled","click"]],template:function(e,a){1&e&&(t.TgZ(0,"mat-card")(1,"div",0)(2,"mat-card-header")(3,"mat-card-title"),t._uU(4,"Transfer Intransit Quantity"),t.qZA()(),t.TgZ(5,"button",1),t.NdJ("click",function(){return a.closeDialog()}),t.TgZ(6,"mat-icon",2),t._uU(7,"close"),t.qZA()()(),t.TgZ(8,"mat-card-content",3)(9,"form",4)(10,"div",5)(11,"div",6)(12,"mat-form-field",7)(13,"mat-label"),t._uU(14," Tally Number "),t.qZA(),t._UZ(15,"input",8),t.qZA(),t.TgZ(16,"mat-form-field",7)(17,"mat-label"),t._uU(18," Line "),t.qZA(),t._UZ(19,"input",8),t.qZA(),t.TgZ(20,"mat-form-field",7)(21,"mat-label"),t._uU(22," Item "),t.qZA(),t._UZ(23,"input",8),t.qZA(),t.TgZ(24,"mat-form-field",7)(25,"mat-label"),t._uU(26," Lots "),t.qZA(),t._UZ(27,"input",8),t.qZA(),t.TgZ(28,"mat-form-field",7)(29,"mat-label"),t._uU(30," Received "),t.qZA(),t._UZ(31,"input",8),t.qZA(),t.TgZ(32,"mat-form-field",7)(33,"mat-label"),t._uU(34," Intransit "),t.qZA(),t._UZ(35,"input",8),t.qZA(),t.TgZ(36,"mat-form-field",7)(37,"mat-label"),t._uU(38," Over "),t.qZA(),t._UZ(39,"input",8),t.qZA(),t.TgZ(40,"mat-form-field",7)(41,"mat-label"),t._uU(42," Short "),t.qZA(),t._UZ(43,"input",8),t.qZA(),t.TgZ(44,"mat-form-field",7)(45,"mat-label"),t._uU(46," Remaining "),t.qZA(),t._UZ(47,"input",8),t.qZA(),t.TgZ(48,"mat-form-field",7)(49,"mat-label"),t._uU(50," User 1 "),t.qZA(),t._UZ(51,"input",8),t.qZA(),t.TgZ(52,"mat-form-field",7)(53,"mat-label"),t._uU(54," Available "),t.qZA(),t._UZ(55,"input",8),t.qZA(),t.TgZ(56,"mat-form-field",7)(57,"mat-label"),t._uU(58," User 2 "),t.qZA(),t._UZ(59,"input",8),t.qZA(),t.TgZ(60,"mat-form-field",7)(61,"mat-label"),t._uU(62," Hold "),t.qZA(),t._UZ(63,"input",8),t.qZA(),t.TgZ(64,"mat-form-field",7)(65,"mat-label"),t._uU(66," User 3 "),t.qZA(),t._UZ(67,"input",8),t.qZA(),t.TgZ(68,"mat-form-field",7)(69,"mat-label"),t._uU(70," Damaged "),t.qZA(),t._UZ(71,"input",8),t.qZA(),t.TgZ(72,"mat-form-field",7)(73,"mat-label"),t._uU(74," User 4 "),t.qZA(),t._UZ(75,"input",8),t.qZA(),t.TgZ(76,"mat-form-field",7)(77,"mat-label"),t._uU(78," New Tally "),t.qZA(),t._UZ(79,"input",8),t.qZA(),t.TgZ(80,"mat-form-field",7)(81,"mat-label"),t._uU(82," New Line "),t.qZA(),t._UZ(83,"input",8),t.qZA(),t.TgZ(84,"mat-form-field",7)(85,"mat-label"),t._uU(86," Transfer "),t.qZA(),t._UZ(87,"input",9),t.qZA()()(),t.TgZ(88,"button",10),t.NdJ("click",function(){return a.updateTransfer()}),t._uU(89," Submit "),t.qZA()()()()),2&e&&(t.xp6(9),t.Q6J("formGroup",a.form),t.xp6(6),t.s9C("value",a.tallyNumber),t.Q6J("disabled",!0),t.xp6(4),t.s9C("value",a.sequence),t.Q6J("disabled",!0),t.xp6(4),t.s9C("value",a.item),t.Q6J("disabled",!0),t.xp6(4),t.s9C("value",a.lots),t.Q6J("disabled",!0),t.xp6(4),t.s9C("value",a.received),t.Q6J("disabled",!0),t.xp6(4),t.s9C("value",a.intransit),t.Q6J("disabled",!0),t.xp6(4),t.s9C("value",a.over),t.Q6J("disabled",!0),t.xp6(4),t.s9C("value",a.short),t.Q6J("disabled",!0),t.xp6(4),t.s9C("value",a.remaining),t.Q6J("disabled",!0),t.xp6(4),t.s9C("value",a.user1),t.Q6J("disabled",!0),t.xp6(4),t.s9C("value",a.available),t.Q6J("disabled",!0),t.xp6(4),t.s9C("value",a.user2),t.Q6J("disabled",!0),t.xp6(4),t.s9C("value",a.hold),t.Q6J("disabled",!0),t.xp6(4),t.s9C("value",a.user3),t.Q6J("disabled",!0),t.xp6(4),t.s9C("value",a.damaged),t.Q6J("disabled",!0),t.xp6(4),t.s9C("value",a.user4),t.Q6J("disabled",!0),t.xp6(4),t.s9C("value",a.newTally),t.Q6J("disabled",!0),t.xp6(4),t.s9C("value",a.newLine),t.Q6J("disabled",!0),t.xp6(5),t.Q6J("disabled",!(a.form.valid&&a.form.dirty)))},dependencies:[b.m,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,T.Hw,y.lW,h.KE,h.hX,Q.Nt,m.a8,m.dk,m.dn,m.n5]}),i})();function U(i,l){1&i&&(t.TgZ(0,"th",25),t._uU(1,"Line"),t.qZA())}function q(i,l){if(1&i&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&i){const e=l.$implicit;t.xp6(1),t.Oqu(e.IDSEQ)}}function D(i,l){1&i&&(t.TgZ(0,"th",25),t._uU(1,"Item"),t.qZA())}function I(i,l){if(1&i&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&i){const e=l.$implicit;t.xp6(1),t.Oqu(e.IDITEM)}}function S(i,l){1&i&&(t.TgZ(0,"th",25),t._uU(1,"Quantity Received"),t.qZA())}function N(i,l){if(1&i&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&i){const e=l.$implicit;t.xp6(1),t.Oqu(e.IDQREC)}}function w(i,l){1&i&&(t.TgZ(0,"th",25),t._uU(1,"Quantity Intransit"),t.qZA())}function J(i,l){if(1&i&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&i){const e=l.$implicit;t.xp6(1),t.Oqu(e.WQREM)}}function R(i,l){1&i&&(t.TgZ(0,"th",25),t._uU(1,"LPs"),t.qZA())}function Y(i,l){if(1&i&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&i){const e=l.$implicit;t.xp6(1),t.Oqu(e.WLPS)}}function L(i,l){1&i&&(t.TgZ(0,"th",27),t._uU(1,"Actions"),t.qZA())}function O(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"td",26)(1,"div",28)(2,"button",29)(3,"mat-icon"),t._uU(4,"more_vert"),t.qZA()(),t.TgZ(5,"ul",30)(6,"li")(7,"button",31),t.NdJ("click",function(){const r=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.transfer(r))}),t.TgZ(8,"mat-icon",32),t._uU(9,"edit"),t.qZA(),t.TgZ(10,"mat-label"),t._uU(11,"Select"),t.qZA()()()()()()}}function x(i,l){1&i&&t._UZ(0,"tr",33)}function k(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"tr",34),t.NdJ("click",function(){const r=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.rowClick(r))}),t.qZA()}}const H=function(){return[8,16,24]};let B=(()=>{class i{constructor(e,a,n,r){this.fb=e,this.iheaderSvc=a,this.matDialog=n,this.router=r,this.displayedColumns=["Line","Item","QtyReceived","QtyIntransit","LPs","Actions"],this.dataSource=new u.by,this.user=localStorage.getItem("userName")||"",this.update=!1,this.type=[],this.pageNumber=1,this.pageSize=8,this.totalRecords=0,this.url="/main-nav/tallys/read"}ngOnInit(){this.element=history.state,console.log(this.element),this.form=this.fb.group({oldTally:this.element[1].IHTALY,newTally:this.element[0],oldQtyTransit:"",newQty:"",oldQtyRcd:""}),this.form.disable(),this.availableQuantity(this.pageSize,this.pageNumber)}availableQuantity(e,a){this.availableSubscription&&this.availableSubscription.unsubscribe(),this.availableSubscription=this.iheaderSvc.TallyTransfer(this.user,this.element[0],this.element[1].IHTALY,e,a).subscribe(n=>{var r=JSON.parse(n[0].data[1]?.value);this.dataSource.data=r.returnedData,this.totalRecords=r.TotalRecords,this.oldQtyTransit=r.OldQtyIntransit,this.newQty=r.NewQtyIntransit,this.oldQtyRcd=r.OldQtyReceived})}ngOnDestroy(){this.availableSubscription&&this.availableSubscription.unsubscribe()}onBack(){this.router.navigate([this.url])}transfer(e){this.matDialog.open(C,{width:"1000px",maxHeight:"80vh",data:[this.element,this.selectedRow],autoFocus:!1})}rowClick(e){this.selectedRow=e}onPaginateChange(e){this.pageSize=e.pageSize,this.availableQuantity(e.pageSize,e.pageIndex+1)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(o.qu),t.Y36(v.X),t.Y36(p.uw),t.Y36(g.F0))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-available-quantity"]],viewQuery:function(e,a){if(1&e&&t.Gf(c.NW,5),2&e){let n;t.iGM(n=t.CRH())&&(a.paginator=n.first)}},standalone:!0,features:[t.jDz],decls:54,vars:11,consts:[[1,"over-Flow"],[1,"title"],["mat-button","",1,"backButton","go-back-btn",3,"click"],[1,"tally-serach-form"],[3,"formGroup"],[1,"row"],[1,"col"],["appearance","outline",1,"full-width"],["matInput","","formControlName","oldTally"],["matInput","","formControlName","newTally"],["matInput","",3,"value"],["mat-table","",1,"mat-elevation-z8","tally-table",3,"dataSource"],["matColumnDef","Line"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Item"],["matColumnDef","QtyReceived"],["matColumnDef","QtyIntransit"],["matColumnDef","LPs"],["matColumnDef","Actions"],["mat-header-cell","","mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",1,"tally-table-pagination",3,"length","pageSizeOptions","pageSize","page"],["paginator",""],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","","mat-header-cell",""],[1,"dropdown","more_options_btn"],["type","button","id","dropdownMenuButton1","data-bs-toggle","dropdown","aria-expanded","false",1,"btn"],["aria-labelledby","dropdownMenuButton1",1,"dropdown-menu"],["mat-icon-button","",3,"click"],["mat-icon-button","","color","primary"],["mat-header-row",""],["mat-row","",3,"click"]],template:function(e,a){1&e&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1)(3,"button",2),t.NdJ("click",function(){return a.onBack()}),t.TgZ(4,"mat-icon"),t._uU(5,"navigate_before "),t.qZA()(),t._uU(6," Available Quantity To Transfer "),t.qZA()(),t.TgZ(7,"mat-card-content",3)(8,"form",4)(9,"div",5)(10,"div",6)(11,"mat-form-field",7)(12,"mat-label"),t._uU(13,"Old Tally"),t.qZA(),t._UZ(14,"input",8),t.qZA(),t.TgZ(15,"mat-form-field",7)(16,"mat-label"),t._uU(17,"New Tally"),t.qZA(),t._UZ(18,"input",9),t.qZA(),t.TgZ(19,"mat-form-field",7)(20,"mat-label"),t._uU(21," Old Qty Intransit"),t.qZA(),t._UZ(22,"input",10),t.qZA(),t.TgZ(23,"mat-form-field",7)(24,"mat-label"),t._uU(25,"New Qty Intransit"),t.qZA(),t._UZ(26,"input",10),t.qZA(),t.TgZ(27,"mat-form-field",7)(28,"mat-label"),t._uU(29,"Old Qty Received"),t.qZA(),t._UZ(30,"input",10),t.qZA()()()()(),t.TgZ(31,"table",11),t.ynx(32,12),t.YNc(33,U,2,0,"th",13),t.YNc(34,q,2,1,"td",14),t.BQk(),t.ynx(35,15),t.YNc(36,D,2,0,"th",13),t.YNc(37,I,2,1,"td",14),t.BQk(),t.ynx(38,16),t.YNc(39,S,2,0,"th",13),t.YNc(40,N,2,1,"td",14),t.BQk(),t.ynx(41,17),t.YNc(42,w,2,0,"th",13),t.YNc(43,J,2,1,"td",14),t.BQk(),t.ynx(44,18),t.YNc(45,R,2,0,"th",13),t.YNc(46,Y,2,1,"td",14),t.BQk(),t.ynx(47,19),t.YNc(48,L,2,0,"th",20),t.YNc(49,O,12,0,"td",14),t.BQk(),t.YNc(50,x,1,0,"tr",21),t.YNc(51,k,1,0,"tr",22),t.qZA(),t.TgZ(52,"mat-paginator",23,24),t.NdJ("page",function(r){return a.onPaginateChange(r)}),t.qZA()()),2&e&&(t.xp6(8),t.Q6J("formGroup",a.form),t.xp6(14),t.s9C("value",a.oldQtyTransit),t.xp6(4),t.s9C("value",a.newQty),t.xp6(4),t.s9C("value",a.oldQtyRcd),t.xp6(1),t.Q6J("dataSource",a.dataSource),t.xp6(19),t.Q6J("matHeaderRowDef",a.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns),t.xp6(1),t.Q6J("length",a.totalRecords)("pageSizeOptions",t.DdM(10,H))("pageSize",a.pageSize))},dependencies:[b.m,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,c.NW,T.Hw,y.lW,h.KE,h.hX,Q.Nt,m.a8,m.dk,m.dn,m.n5,u.BZ,u.fO,u.as,u.w1,u.Dz,u.nj,u.ge,u.ev,u.XQ,u.Gk]}),i})()}}]);